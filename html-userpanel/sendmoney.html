<!DOCTYPE html>
<html lang="zxx" class="js">
<head>
	<meta charset="utf-8">
	<meta name="author" content="cwgs">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="ICO Crypto is a modern and elegant landing page, created for ICO Agencies and digital crypto currency investment website.">
	<!-- Fav Icon  -->
	<link rel="shortcut icon" href="images/favicon.png">
	<!-- Site Title  -->
	<title>Account | User Center - CryptoWallet</title>
	<!-- Vendor Bundle CSS -->
	<link rel="stylesheet" href="assets/css/vendor.bundle.css?ver=101">
	<!-- Custom styles for this template -->
    <link rel="stylesheet" href="assets/css/style.css?ver=101">    
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
    <link rel="stylesheet" href="../assets/css/vendor.bundle.css?ver=192">
    <link rel="stylesheet" href="../assets/css/style.css?ver=192" id="changeTheme">
     
    <script src="tabcontent.js" type="text/javascript"></script>
    <link href="tabcontent.css" rel="stylesheet" type="text/css" />

        <!--BitcoinSv Tools  -->
    <script src="https://www.moneybutton.com/moneybutton.js"></script>    
</head>

<body class="user-dashboard" style="background-color: #EAF3FC;" >
    
    
    <div class="topbar">
        <div class="topbar-md d-lg-none">
            <div class="container">
                <div class="d-flex align-items-center justify-content-between">
                    <a href="#" class="toggle-nav">
                        <div class="toggle-icon">
                            <span class="toggle-line"></span>
                            <span class="toggle-line"></span>
                            <span class="toggle-line"></span>
                            <span class="toggle-line"></span>
                        </div>
                    </a><!-- .toggle-nav -->

                    <div class="site-logo">
                        <a href="index.html" class="site-brand">
                            <img src="images/logo.jpg" alt="logo" srcset="">
                        </a>
                    </div><!-- .site-logo -->
                    
                    <div class="dropdown topbar-action-item topbar-action-user">
                        <a href="#" data-toggle="dropdown"> <img class="icon" src="images/user-thumb-sm.png" alt="thumb"> </a>
                        <div class="dropdown-menu dropdown-menu-right">
                            <div class="user-dropdown">
                                <div class="user-dropdown-head">
                                    <h6 class="user-dropdown-name">Micheal Thomas <span>(CWGS1105)</span></h6>
                                    <span class="user-dropdown-email">useremail@example.com</span>
                                </div>
                                <div class="user-dropdown-balance">
                                    <h6> BALANCE</h6>
                                    <h3>120,000,000 </h3>
                                    <ul>
                                        <li>1.240 BTC</li>
                                        <li>19.043 ETH</li>
                                        <li>6,500.13 USD</li>
                                    </ul>
                                </div>
                                <ul class="user-dropdown-btns btn-grp guttar-10px">
                                    <li><a href="#" class="btn btn-xs btn-warning">Confirm Email</a></li>
                                    <li><a href="sendmoney.html" class="btn btn-xs btn-warning">Send Money</a></li>
                                </ul>
                                <div class="gaps-1x"></div>
                                <ul class="user-dropdown-links">
                                    <li><a href="account.html"><i class="ti ti-id-badge"></i>My Profile</a></li>
                                    <li><a href="security.html"><i class="ti ti-lock"></i>Security</a></li>
                                    <li><a href="activity.html"><i class="ti ti-eye"></i>Activity</a></li>
                                </ul>
                                <ul class="user-dropdown-links">
                                    <li><a href="login.html"><i class="ti ti-power-off"></i>Logout</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- .toggle-action -->
                </div><!-- .container -->
            </div><!-- .container -->
        </div><!-- .topbar-md -->
        <div class="container">
            <div class="d-lg-flex align-items-center justify-content-between">
                <div class="topbar-lg d-none d-lg-block">
                    <div class="site-logo">
                        <a href="index.html" class="site-brand">
                            <img src="images/logo.jpg" alt="logo" srcset="">
                        </a>
                    </div><!-- .site-logo -->
                </div><!-- .topbar-lg -->

                <div class="topbar-action d-none d-lg-block">
                    <ul class="topbar-action-list">
                        <li class="topbar-action-item topbar-action-link">
                            <a href="#"><em class="ti ti-home"></em> Go to main site</a>
                        </li><!-- .topbar-action-item -->

                        <li class="dropdown topbar-action-item topbar-action-language">
                            <a href="#" data-toggle="dropdown"> EN <em class="ti ti-angle-down"></em> </a>
                            <ul class="dropdown-menu">
                                <li><a href="#">FR</a></li>
                                <li><a href="#">JY</a></li>
                                <li><a href="#">CH</a></li>
                            </ul>
                        </li><!-- .topbar-action-item -->

                        <li class="dropdown topbar-action-item topbar-action-user">
                            <a href="#" data-toggle="dropdown"> <img class="icon" src="images/user-thumb-sm.png" alt="thumb"> </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <div class="user-dropdown">
                                    <div class="user-dropdown-head">
                                        <h6 class="user-dropdown-name">Mike Thomas <span>(CWGS1105)</span></h6>
                                        <span class="user-dropdown-email">useremail@example.com</span>
                                    </div>
                                    <div class="user-dropdown-balance">
                                        <h6> BALANCE</h6>
                                        <h3>123,400,000 </h3>
                                        <ul>
                                            <li>1.460 BTC</li>
                                            <li>12.013 ETH</li>
                                            <li>2,700.13 USD</li>
                                        </ul>
                                    </div>
                                    <ul class="user-dropdown-links">
                                        <li><a href="account.html"><i class="ti ti-id-badge"></i>My Profile</a></li>
                                        <li><a href="security.html"><i class="ti ti-lock"></i>Security</a></li>
                                        <li><a href="activity.html"><i class="ti ti-eye"></i>Activity</a></li>
                                    </ul>
                                    <ul class="user-dropdown-links">
                                        <li><a href="login.html"><i class="ti ti-power-off"></i>Logout</a></li>
                                    </ul>
                                </div>
                            </div>
                        </li><!-- .topbar-action-item -->
                    </ul><!-- .topbar-action-list -->
                </div><!-- .topbar-action -->
            </div><!-- .d-flex -->
        </div><!-- .container -->
    </div>
    <!-- TopBar End -->
    
    
    <div class="user-wraper">
        <div class="container">
            <div class="d-flex">
                <div class="user-sidebar">
                    <div class="user-sidebar-overlay"></div>
                    <div class="user-box d-none d-lg-block">
                        <!-- <div class="user-image">
                            <img src="images/user-thumb-lg.png" alt="thumb">
                        </div>
                        <h6 class="user-name">Mike Thomas</h6>
                        <div class="user-uid">Unique ID: <span>CWGS1105</span></div>
                        <ul class="btn-grp guttar-10px">

                            <li><a href="#" class="btn btn-xs btn-warning">Confirm Email</a></li>
                            <li><a href="kyc.html" class="btn btn-xs btn-warning">KYC Pending</a>

                            <li>
                            /* Get user metadata including email */
                            const userMetadata = await magic.user.getMetadata();    
                            <h1>Current user: ${userMetadata.email}</h1>    
                            </li>    
                        </ul> -->
                    </div><!-- .user-box -->
                    
                    <ul class="user-icon-nav">
                        <h3> Main</h3>
                        <li><a href="index.html"><em class="ti ti-dashboard"></em>Dashboard</a></li>
                        <li><a href="sendmoney.html"><em class="ti ti-files"></em>Send Money</a></li>
                        <li><a href="receivemoney.html"><em class="ti ti-pie-chart"></em>Receive Money</a></li>
                        <li><a href="transactions.html"><em class="ti ti-control-shuffle"></em>Transactions History</a></li>
                        <li><a href="tokens.html"><em class="ti ti-pie-chart"></em>Contributions</a></li>
                        <li><a href="account.html"><em class="ti ti-user"></em>Account</a></li>
                        <li><a href="security.html"><em class="ti ti-lock"></em>Security</a></li>
                    </ul><!-- .user-icon-nav -->
                    <div class="user-sidebar-sap"></div><!-- .user-sidebar-sap -->
                    <ul class="user-nav">
                        <li><a href="how-to.html">How to buy?</a></li>
                        <li><a href="faq.html">Faqs</a></li>
                        <li><a href="#">Whitepaper</a></li>
                        <li>Contact Support<span>info@cryptowallet.com</span></li>
                    </ul><!-- .user-nav -->
                    <div class="d-lg-none">
                        <div class="user-sidebar-sap"></div>
                        <div class="gaps-1x"></div>
                        <ul class="topbar-action-list">
                            <li class="topbar-action-item topbar-action-link">
                                <a href="#"><em class="ti ti-home"></em> Go to main site</a>
                            </li><!-- .topbar-action-item -->
                            <li class="dropup topbar-action-item topbar-action-language">
                                <a href="#" data-toggle="dropdown" aria-haspopup="true"> EN <em class="ti ti-angle-up"></em> </a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">FR</a></li>
                                    <li><a href="#">JY</a></li>
                                    <li><a href="#">CH</a></li>
                                </ul>
                            </li><!-- .topbar-action-item -->
                        </ul><!-- .topbar-action-list -->
                    </div>
                </div><!-- .user-sidebar -->
                
                <div class="user-content">
                    <div class="user-panel">
                        <h2 class="user-panel-title">Send Money </h2>

                        <div style="width: 100%; ">
                            <ul class="tabs" data-persist="true">
                                <li><a href="#view1"><i class='fab fa-ethereum' style='font-size:18px; color:orangered'></i>&nbsp;ETH</a></li>
                                <li><a href="#view2"><i class='fab fa-bitcoin' style='font-size:18px; color:orangered'></i>&nbsp;BTC</a>BTC</a></li>
                                <li><a href="#view3">LTC</a></li>
                                <li><a href="#view4">DASH</a></li>
                                <li><a href="#view5">XRP</a></li>
                            </ul>
                            <div class="tabcontents">
                                <div id="view1">
                                    <form id="contract-form">
                                        <div class="form-group">
                                          <label for="Sender Address">Sender ETH Address</label>
                                          <input value="" type="text" class="form-control" id="fromAddress" aria-describedby="fromAddressHelp" placeholder="Enter your address" required="true">
                                          <small id="fromAddressHelp" class="form-text text-muted">Enter your wallet address. Note: you will need to approve this with your private key.</small>
                                        </div>
                                          <div class="form-group">
                                            <label for="Receiver Address">Receiver ETH Address</label>
                                            <input value="0x2932b7A2355D6fecc4b5c0B6BD44cC31df247a2e" type="text" class="form-control" id="toAddress" aria-describedby="toAddressHelp" placeholder="Enter the receipient address" required="true">
                                            <small id="toAddressHelp" class="form-text text-muted">Enter the wallet address of the recipient.</small>
                                          </div>
                                            <div class="form-group">
                                              <label for="Amount">Amount</label>
                                              <input value="2" type="text" class="form-control" id="amount" aria-describedby="amountHelp" placeholder="Amount to send in ETH" required="true">
                                              <small id="amountHelp" class="form-text text-muted">How much you want to send in ETH.</small>
                                            </div>
                                        <button type="submit" class="btn btn-primary">Submit</button>
                                        <div id="deposit-result">Click the Submit button to deposit your ETH to the contract.</div>
                                      </form>
                                      <hr>
                                      <h2>Balance:</h2>
                                      <form id="get-balance-form">
                                        <button type="submit" class="btn btn-primary">Get Balance</button>
                                        <div id="the-balance">Click Button to get the current contract balance.</div>
                                      </form>
                                      <h2>Approver:</h2>
                                      <form id="approver-form">
                                        <button type="submit" class="btn btn-primary">Get Approver</button>
                                        <div id="approver-display">Click Button to get the address of the approver.</div>
                                      </form>
                                  
                                      <form id="approve-form">
                                        <button type="submit" class="btn btn-primary">Approve Transaction</button>
                                        <div id="approval-display">Click the button to approve the transaction.</div>
                                      </form>
            
                                   
                                </div>
                                <div id="view2">
                                              
                                </div>
                                <div id="view3">
                                   
                                </div>
                                <div id="view4">
                                    
                                </div>
                                <div id="view5">
                                   
                                </div>
                            </div>
                        </div>                      
                    
                    </div><!-- .user-panel -->
                </div><!-- .user-content -->
            </div><!-- .d-flex -->
        </div><!-- .container -->
    </div>
    <!-- UserWraper End -->
    
    
    <div class="footer-bar">
        <div class="container">
            <div class="row">
                <div class="col-md-7">
                    <span class="footer-copyright">Copyright 2020, <a href="#">CryptoWallet</a>.  All Rights Reserved.</span>
                </div><!-- .col -->
                <div class="col-md-5 text-md-right">
                    <ul class="footer-links">
                        <li><a href="policy.html">Privacy Policy</a></li>
                        <li><a href="policy.html">Terms of Service</a></li>
                    </ul>
                </div><!-- .col -->
            </div><!-- .row -->
        </div><!-- .container -->
    </div>
    <!-- FooterBar End -->
    
    
	<!-- JavaScript (include all script here) -->
	<script src="assets/js/jquery.bundle.js?ver=101"></script>
    <script src="assets/js/script.js?ver=101"></script>
    
     <!-- Biconomy JavaScript -->
     <script src="https://cdn.jsdelivr.net/npm/@biconomy/mexa@1/dist/mexa.js"></script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="web3.min.js"></script>
    <script src="contractsABI.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> -->

    <script>
        
      var contractAddress = '0xbaB4dF8A7E8Fb0bB0cE049ca931276e735e5a7De';


    //   const provider = window["Ethereum"];
    //   await.provider.enable();    
    //   biconomy = new Biconomy(provider,{ apiKey: HQeVRa_8c.2277545b-55c4-4e60-b295-dbac9d2ffd14});
    //   web3 = new Web3(biconomy);       

      if ( typeof web3 != 'undefined') {
        web3 = new Web3(web3.currentProvider);
      } else {
        web3 = new Web3(window.web3.currentProvider);
        console.log(web3);
        // web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:9545"));
      }
  
      var version = web3.version;
      console.log("using web3 version: " + version);

      var ApprovalContract = new web3.eth.Contract(abi, contractAddress);
       
      console.log(ApprovalContract);
  
      $('#contract-form').submit(function() {
        event.preventDefault();
        var fromAddress = $('#fromAddress').val();
        var toAddress = $('#toAddress').val();
        var amount = $('#amount').val();
        if (web3.utils.isAddress(fromAddress) != true) {
          alert('You did not enter a correct ethereum address for the sender.');
          return;
        }
        if (web3.utils.isAddress(toAddress) != true) {
          alert('You did not enter a correct ethereum address for the recipient');
          return;
        }
        if (amount == 0) {
          alert('You must send more than 0 ETH');
          return;
        }

        ApprovalContract.methods.deposit(toAddress).send({from: fromAddress, gas: 100000, value: web3.utils.toWei(amount,'ether')},
        function(error, result) {
          if (error) {
            console.log('error: ' + error);
              $('#deposit-result').html('Error: ' + error);
          } else {
            $('#deposit-result').html('Success TX: <b>' + result + '</b>');
          }
        })
    });
    
      $('#get-balance-form').submit(function() {
        event.preventDefault();  
        web3.eth.getBalance(contractAddress,
          function(error, result) {
            if (error) {
              console.log('error: ' + error);
            } else {
              console.log('balance:' + result);
              $('#the-balance').html('<b>Current Balance:</b> ' + web3.utils.fromWei(result));
            }
          });
      });

      $('#approve-form').submit(function() {
          event.preventDefault();

          ApprovalContract.methods.approve().call({from: '0x68893D8BfCa223461b54f05cC4A5D9c014F98F21', gas: 100000},
              function(error, result) {
                if (error) {
                  console.log('error: ' + error);
                }
                else {
                  console.log('result: ' + JSON.stringify(result));
                  $('#approval-display').html('Transaction Approved. TX: <b>' + result + '</b>');
                }
              });
        });
        $('#approver-form').submit(function() {
          event.preventDefault();

          ApprovalContract.methods.viewApprover().call(
              function(error, result) {
                if (error) {
                  console.log('error: ' + error);
                }
                else {
                  console.log('result: ' + JSON.stringify(result));
                  $('#approver-display').html('Approver Address: <b>' + result + '</b>');
                }
              });
        });

  
      </script>
                       

</body>
</html>
